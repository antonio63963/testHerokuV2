(this.webpackJsonpherokustore=this.webpackJsonpherokustore||[]).push([[0],{106:function(e,t,r){e.exports={card_margin:"products_card_margin__32i2p",prodWrapper:"products_prodWrapper__2eaEg",spinner:"products_spinner__L8kFv"}},141:function(e,t,r){e.exports={badge:"storeIcon_badge__22zsT"}},164:function(e,t,r){},265:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(31),s=r.n(c),i=r(10),o=(r(163),r(164),r(2)),u=r(54),d=r(268),l=r(115),p=r(272),j=r(275),b=r(276),m=r(277),O=r(19),h=r(273),f=r(141),x=r.n(f),v=r(5),g=function(){var e=Object(O.c)((function(e){return e.cart.items})).reduce((function(e,t){return e+=t.amount}),0);return Object(v.jsx)(h.a,{className:x.a.badge,count:e,overflowCount:10,children:Object(v.jsx)("i",{style:{fontSize:"30px",color:"white"},className:"fas fa-shopping-basket"})})},y=d.a.Header,_=d.a.Content,C=d.a.Footer,E=d.a.Sider;function N(e){var t=e.children,r=Object(i.f)(),a=function(e){r(e)},c=Object(n.useState)(!1),s=Object(o.a)(c,2),O=s[0],h=s[1];return Object(v.jsxs)(d.a,{style:{minHeight:"100vh"},children:[Object(v.jsxs)(y,{className:"site-layout-background",style:{padding:0},children:["HELL(O)",Object(v.jsx)(g,{})]}),Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(E,{collapsible:!0,collapsed:O,onCollapse:function(e){h(e)},children:[Object(v.jsx)("div",{className:"logo"}),Object(v.jsxs)(l.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[Object(v.jsx)(l.a.Item,{icon:Object(v.jsx)(j.a,{}),children:Object(v.jsx)("span",{onClick:function(){return a("/")},children:"Actions"})},"1"),Object(v.jsx)(l.a.Item,{icon:Object(v.jsx)(b.a,{}),children:Object(v.jsx)(u.b,{to:"/products",children:" Products "})},"2"),Object(v.jsx)(l.a.Item,{children:Object(v.jsx)("span",{onClick:function(){return a("/categories")},children:"Categories"})},"3"),Object(v.jsx)(l.a.Item,{icon:Object(v.jsx)(m.a,{}),children:Object(v.jsx)("span",{onClick:function(){return a("/store")},children:"Store"})},"9")]})]}),Object(v.jsxs)(d.a,{className:"site-layout",children:[Object(v.jsxs)(_,{style:{margin:"0 16px"},children:[Object(v.jsxs)(p.a,{style:{margin:"16px 0"},children:[Object(v.jsx)(p.a.Item,{children:"User"}),Object(v.jsx)(p.a.Item,{children:"Bill"})]}),Object(v.jsx)("div",{className:"site-layout-background",style:{padding:24,minHeight:360},children:t})]}),Object(v.jsx)(C,{style:{textAlign:"center"},children:"Ant Design \xa92018 Created by Ant UED"})]})]})]})}var A=r(66),S=r(42),T=r(271);function k(){var e=Object(O.c)((function(e){return e.categories}));return Object(v.jsx)("div",{className:"site-card-wrapper",children:Object(v.jsx)(A.a,{gutter:16,children:e.map((function(e,t){return Object(v.jsx)(S.a,{span:8,style:{marginBottom:"20px"},children:Object(v.jsx)(T.a,{title:e,bordered:!1,children:"Card content"})},t)}))})})}var I=r(1),D=r(17),w=r.n(D),R=r(36),$=r(65),P=r.n($),L="PRODUCT_LOAD_IN_PROGRESS",U="PRODUCT_LOAD_FAIL",W="PRODUCT_ADD_BY_ID",M="GET_PRODUCTS_BY_LIMIT",F="LOADING",B="INIT_APP",z="ADD_TO_STORE",J="DECREASE_STORE",G="DELETE_ITEM_FROM_STORE",H="ADD_TO_CART",Y="DECREASE_ITEM_AMOUNT",Z="DELETE_CART_ITEM",q="REFRESH_CART",K=function(){var e=Object(R.a)(w.a.mark((function e(){var t,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("/api/products");case 2:if(200===(t=e.sent).status){e.next=5;break}return e.abrupt("return",{type:U});case 5:return r={type:M,payload:{products:t.data.payload}},e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(R.a)(w.a.mark((function e(){var t,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("https://fakestoreapi.com/products/categories");case 2:if(200===(t=e.sent).status){e.next=5;break}return e.abrupt("return",{type:U});case 5:return r={type:B,payload:{categories:t.data}},e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(R.a)(w.a.mark((function e(t){var r,n,a,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:return r=e.sent,n=r.payload,a=n.products,e.next=7,V();case 7:(c=e.sent).payload=Object(I.a)(Object(I.a)({},c.payload),{},{products:a}),t(c);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e,t){t(function(e){var t=e.id,r=e.price,n=void 0===r?0:r,a=e.title,c=void 0===a?"":a,s=e.image;return{type:z,payload:{id:t,price:n,title:c,image:void 0===s?"":s}}}(e))},ee=function(){var e=Object(R.a)(w.a.mark((function e(t){var r,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.post("/api/refreshCart",t);case 2:return r=e.sent,n=r.data,console.log("refreshArr",n),e.abrupt("return",{type:q,payload:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e,t){t(function(e){var t=e.id,r=e.price,n=void 0===r?0:r,a=e.title,c=void 0===a?"":a,s=e.image;return{type:H,payload:{id:t,price:n,title:c,image:void 0===s?"":s}}}(e))},re=function(e,t){t(function(e,t){return{type:Y,payload:{id:e,amount:t}}}(e.id,e.amount))},ne=function(e,t){t(function(e){return{type:Z,payload:{id:e}}}(e))},ae=function(){var e=Object(R.a)(w.a.mark((function e(t,r){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,ee(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ce=r(107),se=r(52),ie=r.n(se),oe=T.a.Meta;function ue(e){var t=e.product,r=Object(O.b)(),a=t.id,c=void 0===a?0:a,s=t.title,i=void 0===s?"some title":s,u=t.price,d=void 0===u?1:u,l=t.image,p=t.description,j=void 0===p?"some description":p,b={id:c,title:i,price:d,image:l},m=Object(n.useState)(!1),h=Object(o.a)(m,2),f=h[0],x=h[1];return Object(v.jsxs)("div",{className:ie.a.card,children:[Object(v.jsxs)(T.a,{onMouseOver:function(e){x(!0)},hoverable:!0,style:{width:240},cover:Object(v.jsx)("div",{className:ie.a.imgWrapper,children:Object(v.jsx)("img",{alt:"example",className:ie.a.imgCard,src:l})}),children:[Object(v.jsx)(oe,{title:i}),"$",d]}),Object(v.jsxs)(T.a,{onMouseOut:function(){return x(!1)},className:f?ie.a.focussedCard:ie.a.dispNone,hoverable:!0,style:{width:240},cover:Object(v.jsx)("div",{className:ie.a.imgWrapper,children:Object(v.jsx)("img",{alt:"example",className:ie.a.imgCard,src:l})}),children:[Object(v.jsx)(oe,{title:i}),"$",d,Object(v.jsx)("div",{children:Object(v.jsx)(ce.a,{type:"primary",onClick:function(){return function(e,t){X(e,t),te(e,t)}(b,r)},children:"Add to store"})}),Object(v.jsx)("hr",{}),Object(v.jsx)("p",{children:j})]})]})}var de=r(269);function le(){return Object(v.jsx)("div",{className:"example",children:Object(v.jsx)(de.a,{size:"large"})})}var pe=r(106),je=r.n(pe);var be=function(){var e=Object(O.c)((function(e){return e.shop})),t=Object(O.b)();console.log("Productd_out"),Object(n.useEffect)((function(){e.products||Q(t),console.log("Productd")}),[]),Object(n.useEffect)((function(){console.log(e)}),[e]);var r="SUCCESS"!==e.arrProductStatus;return Object(v.jsx)("div",{children:r?Object(v.jsx)("div",{className:je.a.prodWrapper,children:Object(v.jsx)(le,{className:je.a.spinner,style:{position:"absolute",bottom:"50px"}})}):Object(v.jsx)(A.a,{gutter:16,children:e.products.map((function(e){return Object(v.jsx)(S.a,{className:je.a.card_margin,children:Object(v.jsx)(ue,{product:e})},e.id)}))})})};function me(){return Object(v.jsxs)(T.a,{title:"Actions",children:[Object(v.jsx)(T.a,{type:"inner",title:"Action 1",children:"Super action #1"}),Object(v.jsx)(T.a,{style:{marginTop:16},type:"inner",title:"Action 2",children:"Super action #2"})]})}var Oe=r(274),he=r(270),fe=r(49),xe=r.n(fe),ve=function(e){var t=e.props,r=t.id,n=t.ind,a=Object(O.b)(),c=Object(O.c)((function(e){return e.cart.items[n]}));console.log("SELECTED PROD: ",t);var s=c.title,i=c.price,o=c.amount,u=c.image;return Object(v.jsxs)(Oe.b,{size:12,children:[Object(v.jsx)(he.a,{width:200,src:u,placeholder:Object(v.jsx)(he.a,{preview:!1,src:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png?x-oss-process=image/blur,r_50,s_50/quality,q_1/resize,m_mfit,h_200,w_200",width:200})}),Object(v.jsxs)("div",{className:xe.a.bodyCardWrapper,children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("h3",{className:xe.a.propName,children:"Title: "}),Object(v.jsx)("span",{children:s}),Object(v.jsxs)("h3",{className:xe.a.propName,children:["Price: ",i]}),Object(v.jsx)("span",{children:i}),Object(v.jsx)("h3",{className:xe.a.propName,children:"Amount:"}),Object(v.jsx)("span",{children:o}),Object(v.jsx)("h2",{className:xe.a.propName,children:"Sum:"}),Object(v.jsx)("span",{children:o*i})]}),Object(v.jsxs)("div",{className:xe.a.buttonsWrapper,children:[Object(v.jsx)(ce.a,{onClick:function(){te({id:r,ind:n},a)},className:xe.a.btnAction,type:"primary",children:"Add"}),Object(v.jsx)(ce.a,{onClick:function(){re({id:r,amount:o},a)},className:xe.a.btnAction,type:"primary",children:"Decrease"}),Object(v.jsx)(ce.a,{onClick:function(){return console.log("DELETE!!! id: ",r),void ne(r,a)},className:xe.a.btnAction,type:"danger",children:"Delete"})]})]})]})},ge=function(){var e=Object(i.f)(),t=Object(O.c)((function(e){return e.cart.items})),r=Object(O.b)();return Object(n.useEffect)((function(){console.log("STORE:",t)}),[t]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Cart"}),Object(v.jsx)("div",{children:t.map((function(e,t){return Object(v.jsx)(ve,{props:{id:e.id,ind:t}},"sotoreItem".concat(t))}))}),Object(v.jsx)("hr",{}),Object(v.jsx)("h2",{style:{margin:0},children:"Total:"}),Object(v.jsx)("h3",{children:t.reduce((function(e,t){return e+=t.amount*t.price}),0).toFixed(2)}),Object(v.jsx)("button",{type:"primary",onClick:function(){return e("/products")},children:"\u0421ontinue shopping"}),t.length>0?Object(v.jsx)("button",{type:"dashed",onClick:function(){return e=t,console.log("refresh"),void ae(e,r);var e},children:"Refresh cart"}):Object(v.jsx)("button",{children:"Cart is empty"})]})})};var ye=function(){var e=Object(O.b)();return console.log("App init"),Object(n.useEffect)((function(){Q(e)})),Object(v.jsx)(N,{children:Object(v.jsxs)(i.c,{children:[Object(v.jsx)(i.a,{exact:!0,path:"/",element:Object(v.jsx)(me,{})}),Object(v.jsx)(i.a,{exact:!0,path:"/categories",element:Object(v.jsx)(k,{})}),Object(v.jsx)(i.a,{exact:!0,path:"/products",element:Object(v.jsx)(be,{})}),Object(v.jsx)(i.a,{exact:!0,path:"/store",element:Object(v.jsx)(ge,{})})]})})},_e=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,278)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},Ce=r(7),Ee=r(20),Ne=r.n(Ee),Ae={store:{items:[],generalAmount:0,total:0}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0,r=function(e,t){return t.findIndex((function(t){return t.id===e}))},n=function(e){var t=e.store.items.reduce((function(e,t){return t.sum=t.amount*t.price,e.generalAmount+=t.amount,e.total+=t.sum,e}),{total:0,generalAmount:0}),r=t.total,n=t.generalAmount;e.store.generalAmount=n,e.store.total=r};switch(t.type){case F:return Ne()(e,{arrProductStatus:{$set:{LOADING:F}}});case L:var a={id:Number(t.payload.id),status:"in_progress"};return Ne()(e,{products:{$push:[a]}});case U:var c=r(t.payload.id,e.items);return Ne()(e,{products:Object(Ce.a)({},c,{status:{$set:"fail"}})});case W:var s=r(t.payload.product.id,e.items),i=Ne()(e,{products:Object(Ce.a)({},s,{$set:t.payload.product})});return console.log("add : ",s,i),i;case M:return console.log("GET_PRODUCTS_BY_LIMIT: ",e),Ne()(e,{products:{$set:t.payload.products},arrProductStatus:{$set:"SUCCESS"}});case B:return Ne()(e,{categories:{$set:t.payload.categories},products:{$set:t.payload.products},arrProductStatus:{$set:"SUCCESS"}});case z:var o=e.store.items.reduce((function(e,r,n){return r.id===t.payload.id&&(e.ind=n,e.amount=r.amount+1),e}),{ind:null,amount:null});if(null===o.ind){var u=Object(I.a)(Object(I.a)({},t.payload),{},{amount:1}),d=Ne()(e,{store:{items:{$push:[u]}}});return n(d),d}var l=Ne()(e,{store:{items:Object(Ce.a)({},o.ind,{amount:{$set:o.amount}})}});return n(l),l;case J:var p=t.payload,j=p.id,b=p.amount,m=r(j,e.store.items);if(1===b){var O=Ne()(e,{store:{items:{$splice:[[m,1]]}}});return O}if(-1!==m){var h=Ne()(e,{store:{items:Object(Ce.a)({},m,{amount:{$set:b-1}})}});return n(h),console.log("inc state: ",h),h}return e;case G:var f=t.payload.id,x=r(f,e.store.items);if(console.log("ind DEL ITEM: ",x),-1!==x){var v=Ne()(e,{store:{items:{$splice:[[x,1]]}}});return n(v),v}return e;default:return e}},Te=r(154),ke=r(69),Ie=r(114),De=r(155),we={items:[]},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0,r=function(t){return e.items.findIndex((function(e){return e.id===t}))};switch(t.type){case H:var n=r(t.payload.id);if(-1===n){var a=Ne()(e,{items:{$push:[Object(I.a)(Object(I.a)({},t.payload),{},{amount:1})]}});return a}var c=e.items[n].amount+1,s=Ne()(e,{items:Object(Ce.a)({},n,{amount:{$set:c}})});return s;case Y:var i=t.payload,o=i.id,u=i.amount,d=r(o);if(1===u){var l=Ne()(e,{items:{$splice:[[d,1]]}});return l}if(-1!==d){var p=Ne()(e,{items:Object(Ce.a)({},d,{amount:{$set:u-1}})});return p}console.log("\u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d");case Z:var j=t.payload.id;console.log("delllll: ",e.items);var b=r(j);if(-1!==b){var m=Ne()(e,{items:{$splice:[[b,1]]}});return m}return e;case q:if("ok"!==t.payload.status)return e;Ne()(e,{items:{$set:[t.payload.payload.refreshCart]}});default:return e}},$e={key:"root",storage:r.n(De).a,whitelist:["cart"],blacklist:["shop"]},Pe=Object(ke.a)({shop:Se,cart:Re}),Le=Object(Ie.a)($e,Pe),Ue=Object(ke.b)(Le),We=Object(Ie.b)(Ue),Me=Ue;s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(O.a,{store:Me,children:Object(v.jsx)(Te.a,{loading:null,persistor:We,children:Object(v.jsx)(u.a,{children:Object(v.jsx)(ye,{})})})})}),document.getElementById("root")),_e()},49:function(e,t,r){e.exports={bodyCardWrapper:"storeItem_bodyCardWrapper__oXa-o",btnAction:"storeItem_btnAction__1DLuL",propName:"storeItem_propName__2c12c"}},52:function(e,t,r){e.exports={imgCard:"card_imgCard__3qJWg",imgWrapper:"card_imgWrapper__3UmUB",spinner:"card_spinner__3zKaA",card:"card_card__2_QZT",focussedCard:"card_focussedCard__20mJJ",hidden:"card_hidden__2YuwZ",dispNone:"card_dispNone__14y2i"}}},[[265,1,2]]]);
//# sourceMappingURL=main.0c837afe.chunk.js.map